(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"./app/src/components/BoardBannerList/index.ts":function(e,n,a){"use strict";a.r(n),a.d(n,"BoardBannerList",(function(){return F})),a.d(n,"useBoardBannerList",(function(){return B}));var i=a("./node_modules/react/index.js"),t=a.n(i),s=a("./node_modules/classnames/index.js"),r=a.n(s),o=a("./app/src/components/Banner/index.ts"),l=a("./packages/nachos/button.ts"),d=a("./packages/feature-flag-client/index.ts"),m=a("./packages/i18n/index.ts"),c=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),u=a.n(c),p=a("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/BoardBannerList/BoardBannerList.less"),b={insert:"head",singleton:!1},v=(u()(p.a,b),p.a.locals||{}),g=a("./packages/colors/index.ts"),k=a("./node_modules/@apollo/client/react/hooks/useQuery.js");a("./node_modules/@apollo/client/react/hooks/useLazyQuery.js");function f(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function N(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?f(Object(a),!0).forEach((function(n){y(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function y(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}const j={context:{operationName:"BoardBannerList"}},h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BoardBannerList"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"memberId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"member"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"memberId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banners"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"dismissable"}},{kind:"Field",name:{kind:"Name",value:"meta"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMembersInDomain"}},{kind:"Field",name:{kind:"Name",value:"totalWorkspacesInDomain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"oneTimeMessagesDismissed"}}]}}]}}]};var O=a("./node_modules/@apollo/client/react/hooks/useMutation.js");function w(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,i)}return a}function _(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?w(Object(a),!0).forEach((function(n){D(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function D(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}const S={context:{operationName:"DismissBanner"}},x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DismissBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"memberId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"messageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addOneTimeMessagesDismissed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"memberId"},value:{kind:"Variable",name:{kind:"Name",value:"memberId"}}},{kind:"Argument",name:{kind:"Name",value:"messageId"},value:{kind:"Variable",name:{kind:"Name",value:"messageId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"oneTimeMessagesDismissed"}}]}}]}}]};function B({skip:e=!1}={}){const{data:n}=function(e){const n=N(N({},j),e);return k.a(h,n)}({skip:e,variables:{memberId:"me"}}),a=null==n?void 0:n.member,[t]=function(e){const n=_(_({},S),e);return O.a(x,n)}(),[s,r]=Object(i.useState)([]),[o,l]=Object(i.useState)([]),d=Object(i.useCallback)((async e=>{l((n=>n.concat(e.id))),await t({variables:{memberId:"me",messageId:e.id}})}),[t]),m=Object(i.useMemo)((()=>s?s.filter((e=>!(null!=o&&o.includes(e.id)))):[]),[s,o]),c=Object(i.useMemo)((()=>m.length>0),[m]);return Object(i.useEffect)((()=>{if(a&&a.banners){let e=a.banners;a.oneTimeMessagesDismissed&&(e=e.filter((e=>{var n;return!(null!==(n=a.oneTimeMessagesDismissed)&&void 0!==n&&n.includes(e.id))})),l(a.oneTimeMessagesDismissed)),r(e)}}),[a]),{banners:m,me:a,handleDismissClick:d,shouldRenderBanner:c,oneTimeMessagesDismissed:o}}const I=Object(m.forNamespace)(),T=a("./resources/images/onboarding-banner/banner-wave-right.svg"),E=a("./resources/images/onboarding-banner/banner-wave-left.svg"),F=()=>{const e=Object(d.useFeatureFlag)("enterprise.discover-trello-use-in-your-org",!1),{banners:n,handleDismissClick:a,shouldRenderBanner:s}=B({skip:!e});if(!e)return null;return s?t.a.createElement(t.a.Fragment,null,t.a.createElement(i.Suspense,{fallback:null},t.a.createElement("div",null,n.map(((e,n)=>t.a.createElement(o.a,{bannerColor:g.N0,shadow:!0,roundedCorners:!0,alignCloseTop:!0,className:v.banner,onDismiss:e.dismissable?()=>a(e):void 0,key:"banner-".concat(n,"-").concat(e.id)},t.a.createElement("div",{className:v.container},t.a.createElement("div",{className:v.body},t.a.createElement("div",{className:v.bannerMsg},t.a.createElement("div",null,t.a.createElement("span",null,t.a.createElement("p",null,e.message))),e.url&&t.a.createElement("div",{className:v.controls},t.a.createElement(l.ButtonLink,{link:e.url,isPrimary:!0,openInNewTab:!0},I("learn more button")))))),t.a.createElement("img",{alt:"",src:E,className:r()(v.waveImg,v.leftWaveImg)}),t.a.createElement("img",{alt:"",src:T,className:r()(v.waveImg,v.rightWaveImg)}))))))):null}},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/BoardBannerList/BoardBannerList.less":function(e,n,a){"use strict";var i=a("./node_modules/css-loader/dist/runtime/api.js"),t=a.n(i)()(!1);t.push([e.i,"._3TspsNshoWu3SR {\n  min-height: 50px;\n  position: relative;\n}\n._3TspsNshoWu3SR ._39C5Ta4FQipNzr {\n  display: flex;\n  margin-left: 72px;\n}\n._3TspsNshoWu3SR ._39C5Ta4FQipNzr button {\n  margin: auto;\n}\n.hvEt8_b0vuMMQv {\n  display: flex;\n  align-items: center;\n}\n._3Ga4KedCm9dAtX {\n  object-fit: cover;\n  position: absolute;\n  height: 100%;\n  top: 0;\n  pointer-events: none;\n}\n._1D-v0b1I0wXvWn {\n  width: 300px;\n  left: 0;\n}\n._1ua12Qe89BQbrX {\n  width: 500px;\n  right: 0;\n}\n._1yu6-QosOFVd2u {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n._9NXfzNl5nwaSeE {\n  color: #172B4D;\n  font-size: 14px;\n  font-weight: normal;\n  line-height: 20px;\n  display: flex;\n  max-width: 90ch;\n  margin: 0;\n}\n._9NXfzNl5nwaSeE p {\n  margin-top: 8px;\n}\n._39C5Ta4FQipNzr {\n  flex: 1;\n}\n._39C5Ta4FQipNzr button {\n  margin: 0 0 0 24px;\n}\n@media only screen and (max-width: 1000px) {\n  ._3TspsNshoWu3SR {\n    background-position-x: -128px;\n    padding-left: 192px;\n  }\n  ._1D-v0b1I0wXvWn {\n    left: -148px;\n  }\n}\n@media only screen and (max-width: 800px) {\n  ._3TspsNshoWu3SR {\n    padding-left: 26px;\n  }\n  ._1D-v0b1I0wXvWn {\n    display: none;\n  }\n  ._9NXfzNl5nwaSeE {\n    padding-right: 0;\n  }\n}\n@media only screen and (max-width: 600px) {\n  ._3PvBTm-XWq69Gj {\n    margin-right: 0;\n  }\n}\n",""]),t.locals={banner:"_3TspsNshoWu3SR",controls:"_39C5Ta4FQipNzr",bannerMsg:"hvEt8_b0vuMMQv",waveImg:"_3Ga4KedCm9dAtX",leftWaveImg:"_1D-v0b1I0wXvWn",rightWaveImg:"_1ua12Qe89BQbrX",container:"_1yu6-QosOFVd2u",body:"_9NXfzNl5nwaSeE",content:"_3PvBTm-XWq69Gj"},n.a=t},"./resources/images/onboarding-banner/banner-wave-left.svg":function(e,n,a){e.exports=a.p+"images/onboarding-banner/banner-wave-left.be94ff418959f42d3105.svg"},"./resources/images/onboarding-banner/banner-wave-right.svg":function(e,n,a){e.exports=a.p+"images/onboarding-banner/banner-wave-right.4fd5c2dde3c14f4304a5.svg"}}]);
//# sourceMappingURL=board-banner-list.8c3f5d9cf400dedba1d7.js.map